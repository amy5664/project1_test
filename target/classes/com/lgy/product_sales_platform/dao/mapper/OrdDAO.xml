<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.lgy.product_sales_platform.dao.OrdDAO">

    <!-- 회원 ID로 주문 목록 조회 -->
    <select id="getOrdersByMemberId" resultType="com.lgy.product_sales_platform.dto.OrdDTO">
        SELECT
            ORD_ID as ordId,
            ORD_MEMID as ordMemId,
            ORD_DATE as ordDate,
            ORD_AMOUNT as ordAmount,
            ORD_DFEE as ordDfee,
            ORD_DISCOUNT as ordDiscount,
            ORD_STATUS as ordStatus
        FROM ORDER_DB
        WHERE ORD_MEMID = #{memberId}
        ORDER BY ORD_DATE DESC
    </select>

    <!-- 새로운 주문 정보 저장 -->
    <insert id="save" parameterType="com.lgy.product_sales_platform.dto.OrdDTO">
        INSERT INTO ORDER_DB (ORD_ID, ORD_MEMID, ORD_DATE, ORD_AMOUNT, ORD_DFEE, ORD_DISCOUNT, ORD_STATUS)
        VALUES (#{ordId}, #{ordMemId}, SYSDATE, #{ordAmount}, #{ordDfee}, #{ordDiscount}, #{ordStatus})
    </insert>
  
</mapper>
